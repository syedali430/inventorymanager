  name: Java CI with Maven in Linux

  on:
    push:
    pull_request:

  jobs:
    build:
      runs-on: ubuntu-latest
      strategy:
        matrix:
          java: [8]

      name: Build with Java ${{ matrix.java }} on Linux

      steps:
        - uses: actions/checkout@v4

        - name: Set up JDK ${{ matrix.java }}
          uses: actions/setup-java@v4
          with:
            java-version: ${{ matrix.java }}
            distribution: 'temurin'

        - name: Cache Maven packages
          uses: actions/cache@v4
          with:
            path: ~/.m2
            key: ${{ runner.os }}-m2-jdk${{ matrix.java }}-${{ hashFiles('**/pom.xml', '**/*.yml') }}
            restore-keys: |
              ${{ runner.os }}-m2-

        - name: Build with Maven and SonarCloud
          run: xvfb-run mvn verify
          working-directory: inventorymanager

